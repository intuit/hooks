<!doctype html>
<html lang="en" class="has-spaced-navbar-fixed-top">
<head>






<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.21.1"/>
<link rel="icon" href="https://intuit.github.io/hooks/favicon.ico">


<meta name="robots" content="index, follow">



<title>Hooks Processor</title>


<meta name="description" content="Hooks is a little module for plugins, in Kotlin.">





<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/css/bulma.min.css"  />
<link rel="stylesheet" type="text/css" href="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/css/bulma-tooltip.css"  />
<link rel="stylesheet" type="text/css" href="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/css/bulma-accordion.min.css"  />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism-tomorrow.min.css"  />
<link rel="stylesheet" type="text/css" href="https://intuit.github.io/hooks/assets/css/prismFixes.css"  />
<link rel="stylesheet" type="text/css" href="https://intuit.github.io/hooks/assets/css/orchidSearch.css"  />
<!-- end:inject styles -->





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: HooksTheme -->
<!-- Class: com.intuit.hooks.docs.HooksTheme -->

<!-- PAGE -->
<!-- Type: kotlindoc -->
<!-- Class: com.eden.orchid.sourcedoc.page.SourceDocModuleHomePage -->
<!-- Layout: index -->
<!-- Resolved Layout: templates/layouts/index.peb -->
<!-- Page Template: kotlindocModule-plugins, kotlindocModule, sourceDocModuleHomepage, kotlindoc, page -->
<!-- Resolved Page Template: templates/pages/sourceDocModuleHomepage.peb -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: processor/README.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"modules","baseUrl":"https://intuit.github.io/hooks","fileName":"processor","extension":"html","usePrettyUrl":true,"link":"https://intuit.github.io/hooks/modules/processor"},"description":"","title":"Hooks Processor"};
</script>

<!-- end:debug info -->



<script>
    window.site = {"orchidVersion":"0.21.1","baseUrl":"https://intuit.github.io/hooks","environment":"debug","version":"0.15.0"};
</script>


    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
    
    <!-- end:inject meta-components [head] -->



    <!-- start:inject meta-components [head] -->
    

        
            
        

        
            
        
    
    <!-- end:inject meta-components [head] -->









</head>
<body>
<nav class="navbar is-spaced is-fixed-top is-dark" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://intuit.github.io/hooks">
        <img src="https://intuit.github.io/hooks/assets/media/hooks_multi-3d-dark-bg.svg" alt="Hooks">
      </a>
      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div class="navbar-menu" id="navMenu">
      <div class="navbar-start">
        <form id="search-input" data-orchid-search>
  <div class="field has-addons">
    <div class="control text-control">
      <input class="input" type="text" name="query" placeholder="Search Hooks docs...">

      <div id="search-progress" data-orchid-search-progress style="display: none;">
        <div class="loader">Loading...</div>
      </div>
    </div>
    <div class="control">
      <input type="submit" class="button is-info" value="Search">
    </div>
  </div>
</form>
<div id="search-results" data-orchid-search-results style="display: none;">
  <div class="carat"></div>
  <b>
    Search Results
    <i class="fa fa-times" aria-hidden="true" onclick="$('[data-orchid-search-results]').hide()"></i>
  </b>
  <ul></ul>
</div>

      </div>
      <div class="navbar-end">

      
      
        <a class="navbar-item" href="https://intuit.github.io/hooks">
          <span class="icon has-text-info"><i class="fas fa-home"></i></span>
          <span>Home</span>
        </a>
      
      
      
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon has-text-info"><i class="fas fa-graduation-cap"></i></span>
            <span>User Guide</span>
          </a>
          <div class="navbar-dropdown is-right">
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/wiki/getting-started">Getting Started</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/wiki/using-hooks">Using Hooks</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/wiki/key-concepts">Key Concepts</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/wiki/plugin-architecture">Plugin Architecture</a>
            
          
          </div>
        </div>
      
      
      
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon has-text-info"><i class="fas fa-book"></i></span>
            <span>API</span>
          </a>
          <div class="navbar-dropdown is-right">
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/modules/hooks">Hooks Library</a>
            
          
            
              <hr class="navbar-divider">
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/modules/gradle-plugin">Gradle Plugin</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/modules/processor">Hooks Processor</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/modules/maven-plugin">Maven Kotlin Extension</a>
            
          
          </div>
        </div>
      
      
      
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link">
            <span class="icon has-text-info"><i class="fas fa-info-circle"></i></span>
            <span>Information</span>
          </a>
          <div class="navbar-dropdown is-right">
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/changelog">Changelog</a>
            
          
            
              <a class="navbar-item" href="https://intuit.github.io/hooks/license">License</a>
            
          
          </div>
        </div>
      
      

      </div>
    </div>
  </div>
</nav>

<main class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-10-desktop">
      
        
<nav class="breadcrumb" aria-label="breadcrumbs">
<ul>


    <li class="is-active"><a href="https://intuit.github.io/hooks/modules/processor" aria-current="page">Hooks Processor</a></li>


</ul>
</nav>


        <div class="content is-medium">
        
    <!-- start:inject components -->
    
        
            
                
                    
                        <h1 id="hooks-processor"><a href="#hooks-processor" id="hooks-processor" class="anchor"></a>Hooks Processor</h1>
<p>Built on the <a href="https://kotlinlang.org/docs/ksp-overview.html#0">Kotlin Symbol Processing API</a>, the Hooks processor enables consumers to create hooks using the type-driven DSL provided in the hooks library. KSP based processors are generally easy to apply to Gradle projects using the provided <a href="https://kotlinlang.org/docs/ksp-quickstart.html#use-your-own-processor-in-a-project">plugin</a>. However, we also have Gradle and Maven wrappers to ease the burden of KSP configuration. If you'd like to use outside those build systems, the processor is published as <code>com.intuit.hooks:processor:$version</code>. If you do find yourself using the processor directly, we would love to hear about your use case and would appreciate any contributions to support other build systems.</p>
<h3 id="manual-gradle-ksp-configuration"><a href="#manual-gradle-ksp-configuration" id="manual-gradle-ksp-configuration" class="anchor"></a>Manual Gradle KSP configuration</h3>
<!--- INCLUDE
/** Throwaway code for knit (would be really nice if I could just specify a start for knit or exclude for knit)
-->
<pre><code class="language-kotlin">// build.gradle(.kts)
plugins {
    id(&quot;com.google.devtools.ksp&quot;) version KSP_VERSION // &gt;= 1.0.5
}

dependencies {
    ksp(&quot;com.intuit.hooks&quot;, &quot;processor&quot;, HOOKS_VERSION)
}
</code></pre>
<!--- INCLUDE
*/
-->
<!--- KNIT example-throwaway-01.kt -->
<h3 id="processor-dsl"><a href="#processor-dsl" id="processor-dsl" class="anchor"></a>Processor DSL</h3>
<p>With the processor configured in your project, you can now create hooks by defining a <code>Hooks</code> subclass. This gives you access to a collection of methods to create hook implementations based on the type signature passed into the method.</p>
<!--- TEST_NAME HooksDSLTest -->
<!--- INCLUDE
import com.intuit.hooks.*
import com.intuit.hooks.dsl.Hooks
-->
<pre><code class="language-kotlin">internal abstract class GenericHooks : Hooks() {
    @Sync&lt;(newSpeed: Int) -&gt; Unit&gt; abstract val sync: Hook
    @SyncBail&lt;(Boolean) -&gt; BailResult&lt;Int&gt;&gt; abstract val syncBail: Hook
    @SyncLoop&lt;(foo: Boolean) -&gt; LoopResult&gt; abstract val syncLoop: Hook
    @SyncWaterfall&lt;(name: String) -&gt; String&gt; abstract val syncWaterfall: Hook
    @AsyncParallelBail&lt;suspend (String) -&gt; BailResult&lt;String&gt;&gt; abstract val asyncParallelBail: Hook
    @AsyncParallel&lt;suspend (String) -&gt; Int&gt; abstract val asyncParallel: Hook
    @AsyncSeries&lt;suspend (String) -&gt; Int&gt; abstract val asyncSeries: Hook
    @AsyncSeriesBail&lt;suspend (String) -&gt; BailResult&lt;String&gt;&gt; abstract val asyncSeriesBail: Hook
    @AsyncSeriesLoop&lt;suspend (String) -&gt; LoopResult&gt; abstract val asyncSeriesLoop: Hook
    @AsyncSeriesWaterfall&lt;suspend (String) -&gt; String&gt; abstract val asyncSeriesWaterfall: Hook
}
</code></pre>
<p>The processor uses this class to create new hook implementations and instances. Currently, the processor generates a new class that subclasses <code>GenericHooks</code> and overrides the member properties, which is why they need to be <code>abstract</code>. This is important to note, as otherwise, the code will not compile because the member property is final. When using the hooks DSL, you must follow these constraints:</p>
<ol>
<li><code>Hooks</code> subclass <em>must</em> be abstract</li>
<li>All member properties that use the hooks DSL methods <em>must</em> be abstract</li>
<li>Hook property types can include star projection, but should be the same hook type</li>
<li>Any <code>async</code> hook must take a <code>suspend</code> typed method</li>
<li>Bail hooks must return a <code>BailResult</code></li>
<li>Loop hooks must return a <code>LoopResult</code></li>
</ol>
<p>Most of these constraints should give you an error when the processor runs, however others might result in a generic compiler error, like stated above.</p>
<p>The generated class name will be <code>${name}Impl</code>, thus the snippet above could be used in the following manner:</p>
<pre><code class="language-kotlin">fun main() {
    val hooks = GenericHooksImpl()
    hooks.sync.tap(&quot;LoggerPlugin&quot;) { newSpeed: Int -&gt;
        println(&quot;newSpeed: $newSpeed&quot;)
    }
    hooks.sync.call(30)
    // newSpeed: 30
}
</code></pre>
<!--- KNIT example-dsl-01.kt -->
<!--- TEST
newSpeed: 30
-->




                    
                
            
        
    
    <!-- end:inject components -->


        </div>
      
      

      </div>
    </div>
  </div>
</main>
<footer class="footer">
  <div class="container">
    <div class="columns">
      <div class="column">
        <p class="has-text-left-tablet has-text-centered-mobile">
        
          <a href="https://github.com/intuit/hooks/" class="button is-dark">
            <span class="icon"><i class="fab fa-lg fa-github"></i></span>
            <span>GitHub</span>
          </a>
        
        </p>
      </div>
      <div class="column">
        <p class="has-text-right-tablet has-text-centered-mobile">
          <a href="https://bulma.io/">
            <img
              src="https://intuit.github.io/hooks/assets/media/made-with-bulma--semiblack.png"
              alt="Bulma"
              width="171"
              height="32">
          </a>
          <a href="https://orchid.run/">
            <img
              src="https://intuit.github.io/hooks/assets/svg/orchid/logo_top_light.svg"
              alt="Orchid 0.21.1"
              width="64"
              height="32">
          </a>
        </p>
      </div>
    </div>
  </div>
</footer>

<!-- start:inject scripts -->
<script defer  src="https://use.fontawesome.com/releases/v5.4.0/js/all.js"></script>
<script  src="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/js/bulma.js"></script>
<script  src="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/js/bulma-accordion.min.js"></script>
<script  src="https://intuit.github.io/hooks/HooksTheme/186090c8/assets/js/bulma-tabs.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-groovy.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-markup.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://unpkg.com/lunr/lunr.js"></script>
<script  src="https://intuit.github.io/hooks/assets/js/orchidSearch.js"></script>
<!-- end:inject scripts -->



</body>
</html>
